<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>LCC Intel Center</title>
<meta charset="utf-8" />
<meta http-equiv="Cache-Control" content="no-store" />
<link rel="stylesheet" type="text/css" href="/css/default.css">
<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/default.js"></script>
<!-- <script src="/js/node_modules/epoch-charting/dist/js/epoch.min.js"></script>
<script src="/js/node_modules/d3/dist/d3.min.js"></script>
<script src="/js/node_modules/shelljs/shell.js"></script>
<link rel="stylesheet" type="text/css" href="/js/node_modules/epoch-charting/dist/css/epoch.min.css">
 -->



<script type="text/javascript">
jumpto('overview');

// var head_name ;
// var node_count ;
// var node_name_1 = "node-01?";
// var node_name_2 = "node-02?";
// var node_name_3 = "node-03?";
// var node_name_4 = "node-04?";

initvars();
var lccinfo_file = "/tmp/lccinfo";
var lccary_file = "/tmp/lccrep_ary";
eval(txtop(lccinfo_file));
eval(txtop(lccary_file));
setInterval('eval(txtop(lccinfo_file))', 500);
setInterval('eval(txtop(lccary_file))', 500);
// setInterval(wtjs, 500);

// setInterval('uevf(lccinfo_file)', 500);	//How to send var out?
// setInterval('uevf(lccary_file)', 500);	//How to send var out?

// dspvar();

var start_node_count = node_count;
autoreload();

// function refvar() {
// 	$.ajax({
// 		async: false,
// 		success: wtjs()
// 	})
// }
// 
// setInterval(refvar, 1000);
// lpwtjs()
// readvar(lccinfo_file)
// readvar(lccary_file)
</script>
</head>

<body>
<div class="plant" id="head_detail">
	<h1>LCC Intel Center</h1>
	<div class="plant" >
		<h2>Cluster Detail</h2>
		<p>Cluster Detail</p>
	</div>
</div>

<div class="plant" id="overview" style="height:100vh;border-color:red">
	<a href="#overview"></a>

	<div class="plant" id="head_overview" style="height:62%;" >
			<div class="plant" style="width:38%;height:100%;float:left;" >
				<p>H1 Cluster overview</p>
				<script>
		// var var_str = txtop("/tmp/lccinfo");

				</script>
				<p>Head name:
				<script type="text/javascript">
					document.writeln(head_name);
				</script>
				</p>
				<p>Node count:
				<script type="text/javascript">
					setInterval(document.writeln(start_node_count), 500);
				</script>
				</p>
				<pre><output id="show_load"></output></pre>

				<script>
				// setInterval(wpurdf,500);
				setInterval('urdf("/tmp/lccrep_ary","show_load")',500);
				// document.write(txtop("/css/default.css"));

				// scpid("/js/source.js","lcc_load");
	// console.log(lcc_load);
	// console.log(lcc_imgon);
	// console.log(lcc_ulsc)
				// document.write(lcc_load);
				// document.write(lcc_imgon);
				// document.write(lcc_ulsc);
				</script>


			</div>
			<div class="plant" style="flex:1;height:100%;">
				<!-- or width:calc(100%-30%); -->
				<p>H2</p>

				<p id="demo" >Click to show time</p>
				<button type="button" onclick="displayDate()">Show time</button>
				<div class="plant">
					<p>计数： <output id="result"></output></p>
					<button onclick="scpid()">开始工作</button>
					<button onclick="stopWorker()">停止工作</button>
					<script>
						scpid("/js/demo_workers.js","result");

						setInterval(document.write(window.innerHeight),500);
						
					</script>
				</div>
			</div>
			  <!-- <div class="spacer" style="clear: both;"></div> -->
	</div>

	<div class="plant" id="node_overview" style="display:flex;justify-content:space-around;height:38%">
			<script>
				setInterval('wtallid()',500);
			</script>
		<div class="node-flex" style="flex:1;">
			<div class="plant">
				<h3 id="id_node_name_1_0"></h3>
				<p>Load count: <output id="id_node_name_1_1"></output></p>
				<p>Perf_Realtime: <output id="id_node_name_1_2"></output></p>
				<p>CPU usage :  <output id="id_node_name_1_3"></output>%</p>
				<p>IO usage : <output id="id_node_name_1_4"></output>%</p>
				<p>USER count: <output id="id_node_name_1_5"></output></p>
				<p>AR : <output id="id_node_name_1_6"></output></p>
				<p>Time stamp: <br><output id="id_node_name_1_7"></output></p>
				<pre>Info: <output id="id_node_name_1"></output></pre>
			</div>

			<script>
				
				var crtnb = 1;
				var crtnode = "node_name_"+crtnb
				var actual_name = lcc_load[crtnb][0] ;
				// console.log(crtnode);
				// console.log(actual_name);
				var urdfPath = "/tmp/secrt.sitrep." + actual_name;
				document.getElementById("id_node_name_"+crtnb+"_0").innerHTML = actual_name;
				// setInterval('wtcrtid()',500);
				// setInterval('urdf(urdfPath,"id_node_name_"+crtnb)',500);
			</script>
		</div>

		<div class="node-flex" style="flex:1;">
			<div class="plant">
				<h3 id="id_node_name_2_0"></h3>
				<p>Load count: <output id="id_node_name_2_1"></output></p>
				<p>Perf_Realtime: <output id="id_node_name_2_2"></output></p>
				<p>CPU usage :  <output id="id_node_name_2_3"></output>%</p>
				<p>IO usage : <output id="id_node_name_2_4"></output>%</p>
				<p>USER count: <output id="id_node_name_2_5"></output></p>
				<p>AR : <output id="id_node_name_2_6"></output></p>
				<p>Time stamp: <br><output id="id_node_name_2_7"></output></p>
				<pre>Info: <output id="id_node_name_2"></output></pre>
			</div>

			<script>
				
				var crtnb = 2;
				var crtnode = "node_name_"+crtnb
				var actual_name = lcc_load[crtnb][0] ;
				// console.log(crtnode);
				// console.log(actual_name);
				var urdfPath = "/tmp/secrt.sitrep." + actual_name;
				document.getElementById("id_"+crtnode+"_0").innerHTML = actual_name;
				// setInterval('wtcrtid()',500);
				// setInterval('urdf(urdfPath,"id_"+crtnode)',500);
			</script>
		</div>

	<div class="node-flex" style="flex:1;">
		<script>
			document.write(node_name_3)
		</script>
		<div class="plant">
		<p>Info:</p> 
		<pre><output id="result3"></output></pre>
		</div>

		<script>
		function txtid() {
				var filePath = "/tmp/secrt.sitrep."+node_name_3;
		$.ajax({
		dataType: "text",
		success : function (data) {
				$("#result3").load(filePath);
				}
		});
		}

		setInterval(txtid, 500);
		</script>
	</div>

	<div class="node-flex" style="flex:1;">
		<script>
			document.write(node_name_4)
		</script>
	</div>

	</div>
</div>

<div class="plant" >
	<h2>NX Node Detail</h2>
	<p>NX Node Detail</p>
</div>


</body>

</html>
